{% extends "oscar/customer/baseaccountpage.html" %}
{% load i18n %}

{% block tabcontent %}

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a style="color: #c0a16b" href="{% url 'customer:notifications-inbox' %}" class="nav-link{% if list_type == 'inbox' %} active{% endif %}">{% trans 'Inbox' %}</a>
        </li>
        <li class="nav-item">
            <a style="color: #c0a16b;" href="{% url 'customer:notifications-archive' %}" class="nav-link{% if list_type == 'archive' %} active{% endif %}">{% trans 'Archive' context 'noun' %}</a>
        </li>
    </ul>

    {% if notifications %}

        <form action="{% url 'customer:notifications-update' %}" method="post">
            {% csrf_token %}
            <div style="margin-top: 0.4%" class="shop-cart-table">
                 <p class="text-end">
                 {% trans "Showing" %}
                    {{ page_obj.start_index }}-{{ page_obj.end_index }}
                    {% trans "of" %}
                    {{ paginator.count }}
                    {% trans "Results" %}
                </p>
                <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <tbody>
                    {% for notification in notifications %}
                        <tr>
                            <td>
                                <input type="checkbox" name="selected_notification"
                                value="{{ notification.id }}"/>
                            </td>
                            <td>
                                {% if notification.is_read %}
                                    <i class="fas fa-inbox"></i>
                                {% else %}
                                    <i class="fas fa-envelope"></i>
                                {% endif %}
                            </td>
                            <td>
                                {% if notification.is_read %}
                                    {{ notification.subject|safe }}
                                {% else %}
                                    <strong>{{ notification.subject|safe }}</strong>
                                {% endif %}
                                <br/>
                                <em>{{ notification.date_sent }}</em>
                            </td>
                            <td>
                                <a style="margin-left: 4%" href="{% url 'customer:notifications-detail' pk=notification.pk %}" data-text="View" class="button-one submit-button mt-15">{% trans 'View' %}</a>
<!--                                {% if list_type == 'inbox' %}-->
<!--                                    <a class="btn btn-success btn-sm" href="#" data-behaviours="archive">{% trans 'Archive' context 'verb' %}</a>-->
<!--                                {% endif %}-->
<!--                                <a class="btn btn-danger btn-sm" href="#" data-behaviours="delete">{% trans 'Delete' %}</a>-->
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
           </div>
            {% trans "With selected items:" %}
            {% if list_type == 'inbox' %}
                <button type="submit" data-text="Archive" style="background: #6c757d" class="button-one submit-button mt-15" name="action" value="archive" data-loading-text="{% trans 'Archiving...' %}">{% trans "Archive" context 'verb' %}</button>
            {% endif %}
            <button type="submit" style="background: #dc3545" data-text="Delete" class="button-one submit-button mt-15r" name="action" value="delete" data-loading-text="{% trans 'Deleting...' %}">{% trans "Delete" %}</button>
           </div>
        </form>

        {% include "oscar/partials/pagination.html" %}

    {% else %}
    <div style="margin-top: 0.4%" class="shop-cart-table">
        <p class="mt-3">{% trans "There are no notifications to display." %}</p>
    </div>
    {% endif %}

{% endblock tabcontent %}

{% block onbodyload %}
    {{ block.super }}
    oscar.notifications.init();
{% endblock %}
