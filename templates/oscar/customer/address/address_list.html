{% extends "oscar/customer/baseaccountpage.html" %}
{% load i18n %}

{% block tabcontent %}

    {% if addresses %}
<div class="shop-cart-table">
    <div class="table-responsive">
         <p class="text-end">
         {% trans "Showing" %}
            {{ page_obj.start_index }}-{{ page_obj.end_index }}
            {% trans "of" %}
            {{ paginator.count }}
            {% trans "Results" %}
        </p>
        <table class="table table-striped table-bordered">
            <tbody>
                <tr>
                    <th>{% trans 'Address' %}</th>
                    <th></th>
                </tr>
                {% for address in addresses %}
                    <tr>
                        <td>
                            {% if address.is_default_for_shipping %}
                                <span class="badge badge-success">{% trans 'Default shipping address' %}</span>
                            {% endif %}
                            {% if address.is_default_for_billing %}
                                <span class="badge badge-info">{% trans 'Default billing address' %}</span>
                            {% endif %}
                            <address>
                                {% for field in address.active_address_fields %}
                                    {{ field }}<br/>
                                {% endfor %}
                            </address>
                        </td>
                        <td>
                         <div class="d-flex flex-column">
                            <!-- First row: Edit and Delete buttons on the same line -->
                            <div class="d-flex mb-2">
                                <a class="button-one submit-button mt-15" data-text="Edit" href="{% url 'customer:address-detail' pk=address.id %}">{% trans 'Edit' %}</a>
                                <a href="{% url 'customer:address-delete' pk=address.id %}" data-text="delete" style="margin-left: 2%;background: #dc3545" class="button-one submit-button mt-15">
                                    {% trans 'Delete' %}
                                </a>
                            </div>

                            <!-- Second row: Set as default shipping and billing on the same line -->
                            <div class="d-flex">
                                {% if address.country.is_shipping_country and not address.is_default_for_shipping %}
                                    <a href="{% url 'customer:address-change-status' pk=address.id action='default_for_shipping' %}" style="color: #c0a16b">
                                        {% trans 'Set as default shipping address' %}
                                    </a>
                                {% endif %}
                            </div>
                                <div class="d-flex">
                                {% if not address.is_default_for_billing %}
                                    <a href="{% url 'customer:address-change-status' pk=address.id action='default_for_billing' %}" style="margin-left:2%;color:#c0a16b">
                                        {% trans 'Set as default billing address' %}
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
        {% include "oscar/partials/pagination.html" %}
    {% else %}
        <p>{% trans 'There are no addresses in your address book.' %}</p>
    {% endif %}
    <p>
        <a href="{% url 'customer:address-create' %}" data-text="Add a new address" class="button-one submit-button mt-15">{% trans 'Add a new address' %}</a>
    </p>
</div>
<style>
    .badge{
        background: rgba(192, 161, 107, 0.8)
    }
</style>
{% endblock tabcontent %}
